<%- include('partials/header.ejs'); -%>

<div class="box" id="heading">
  <h1><%= title %></h1>
</div>
<div class="box">
  <div class="search-container">
    <form class="search-bar" action="/search" method="post">
      <input
        type="text"
        name="bookTitle"
        placeholder="Search a book title..."
        autocomplete="off"
        autofocus
        required
      />
      <button type="submit">ğŸ” Search</button>
    </form>
  </div>
  <div class="results">
    <% for(let book of library){%>
    <div class="book">
      <!--Display the book's cover if exist -->
      <img
        src="<%= book.cover_key ? `https://covers.openlibrary.org/b/id/${book.cover_key}-M.jpg` : '/images/no-cover.png' %>"
        alt="Book cover"
      />

      <h2><%= book.title %></h2>

      <p>
        <strong>Author:</strong>
        <%= book.author_name %>
      </p>

      <p>
        <strong>First published:</strong>
        <%= book.first_publish_year || 'N/A' %>
      </p>

      <!-- Button Delete from library -->
      <form action="/delete-book" method="post">
        <input type="hidden" name="book_id" value="<%= book.id %>" />
        <button type="submit" class="btn btn-del">Remove from library</button>
      </form>
    </div>
    <% } %>
  </div>
</div>

<%- include('partials/footer.ejs'); -%>
